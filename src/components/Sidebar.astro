---
import type { MarkdownHeading } from 'astro'
import SiteStats from '@/components/Sidebar/SiteStats.astro'
import SocialLinks from '@/components/Sidebar/SocialLinks.astro'
import TOC from '@/components/Widgets/TOC.astro'
import { themeConfig } from '@/config'

interface Props {
  headings?: MarkdownHeading[]
  isPost?: boolean
}

const { headings = [], isPost = false } = Astro.props
const showTOC = isPost && themeConfig.global.toc && headings.length > 0
---

<aside class="sidebar">
  <SiteStats />

  {showTOC && (
    <div class="sidebar-section">
      <TOC headings={headings} />
    </div>
  )}

  <SocialLinks />
</aside>

<style>
.sidebar {
  --at-apply: 'hidden lg:(block w-56 flex-shrink-0)';
}

.sidebar-section {
  --at-apply: 'mb-6';
}
</style>
